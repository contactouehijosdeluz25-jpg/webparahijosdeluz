document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".mobile-nav-toggle"),t=document.getElementById("primary-navigation");e&&t&&e.addEventListener("click",()=>{const o="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!o),t.setAttribute("data-visible",!o),o||t.querySelector("a").focus()}),function(){const e=document.querySelectorAll(".js-video-trigger");let t=null;const o=e=>{t||(()=>{if(document.getElementById("pip-player"))return;const e=document.createElement("div");e.id="pip-player",e.className="pip-player",e.innerHTML='\n                <div class="pip-player-header">\n                    <button class="pip-player-close" aria-label="Cerrar video">&times;</button>\n                </div>\n                <div class="video-container">\n                    <iframe id="pip-youtube-video" width="560" height="315" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n                </div>\n            ',document.body.appendChild(e),t=e,t.querySelector(".pip-player-close").addEventListener("click",l)})();t.querySelector("#pip-youtube-video").src=`https://www.youtube.com/embed/${e}?autoplay=1&rel=0&origin=${window.location.origin}`,t.classList.add("show"),t.querySelector(".pip-player-close").focus()},l=()=>{if(!t)return;t.querySelector("#pip-youtube-video").src="",t.classList.remove("show"),document.querySelector(".js-video-trigger.last-focused")?.focus()};e.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const l=e.dataset.videoId;e.classList.add("last-focused"),l&&o(l)})})}();const o=document.getElementById("cookie-consent-banner"),l=document.getElementById("cookie-accept-btn"),r=document.getElementById("cookie-decline-btn"),i="hijosdeluz_cookie_consent";function n(){o&&(o.style.display="none")}const c=localStorage.getItem(i);"accepted"!==c&&"declined"!==c||n(),l&&l.addEventListener("click",()=>{localStorage.setItem(i,"accepted"),n()}),r&&r.addEventListener("click",()=>{localStorage.setItem(i,"declined"),n()});const s=document.getElementById("scroll-to-top-btn");s&&s.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})});const a=document.querySelector(".main-header");let d=!1;window.addEventListener("scroll",()=>{d||(window.requestAnimationFrame(()=>{!function(){const e=window.scrollY;a&&a.classList.toggle("scrolled",e>50),s&&s.classList.toggle("is-visible",e>300)}(),d=!1}),d=!0)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t)e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"});else{const o=document.querySelector(t);o&&(e.preventDefault(),o.scrollIntoView({behavior:"smooth"}))}})});const u=document.querySelectorAll(".fade-in-element, .gallery-item");if(u.length>0){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},{root:null,rootMargin:"0px",threshold:.1});u.forEach(t=>e.observe(t));document.querySelectorAll(".features-grid, .testimonials-slider, .process-steps, .team-grid, .gallery-grid, .academic-grid, .model-grid").forEach(e=>{e.querySelectorAll(".fade-in-element").forEach((e,t)=>{e.style.transitionDelay=150*t+"ms"})})}const m=document.querySelectorAll(".filter-btn"),y=document.querySelectorAll(".gallery-item");m.forEach(e=>{e.addEventListener("click",()=>{m.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.getAttribute("data-filter");y.forEach(e=>{"all"===t||e.getAttribute("data-category")===t?(e.style.display="block",setTimeout(()=>e.style.opacity="1",10)):(e.style.opacity="0",setTimeout(()=>e.style.display="none",300))})})});const g=document.querySelectorAll("section[id]"),v=document.querySelectorAll(".main-header__nav-link");if(g.length>0&&v.length>0){const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.getAttribute("id"),o=document.querySelector(`.main-header__nav-link[href="#${t}"]`);v.forEach(e=>e.classList.remove("main-header__nav-link--active")),o&&o.classList.add("main-header__nav-link--active")}})},{rootMargin:"-50% 0px -50% 0px"});g.forEach(t=>e.observe(t))}const p=window.location.hash;if(p){const e=document.querySelector(`.main-header__nav-link[href="${p}"]`);e&&(v.forEach(e=>e.classList.remove("main-header__nav-link--active")),e.classList.add("main-header__nav-link--active"))}const f=document.getElementById("typewriter-title");if(f){const e="Educaci√≥n con <strong>Valores</strong> y <strong>Excelencia</strong>",t=[];for(let o=0;o<e.length;o++)if("<"===e[o]){const l=e.indexOf(">",o);t.push(e.substring(o,l+1)),o=l}else t.push(e[o]);let o=0;f.classList.add("typewriter-text"),function e(){o<t.length?(f.innerHTML+=t[o],o++,setTimeout(e,70)):f.classList.remove("typewriter-text")}()}const h=document.querySelectorAll(".like-btn"),b="hijosdeluz_gallery_likes";let E=JSON.parse(localStorage.getItem(b))||{};function L(e,t){const o=e.closest(".gallery-item").querySelector(".like-count"),l=e.querySelector("i");E[t]?(e.classList.add("liked"),l.classList.remove("fa-regular"),l.classList.add("fa-solid"),o.textContent="1"):(e.classList.remove("liked"),l.classList.remove("fa-solid"),l.classList.add("fa-regular"),o.textContent="0")}h.forEach(e=>{const t=e.closest(".gallery-item").dataset.id;L(e,t),e.addEventListener("click",()=>{E[t]=!E[t],localStorage.setItem(b,JSON.stringify(E)),L(e,t)})})});const galleryBtns=document.querySelectorAll(".gallery-filters .filter-btn"),galleryReels=document.querySelectorAll(".gallery-reel");galleryBtns.forEach(e=>{e.addEventListener("click",()=>{galleryBtns.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.getAttribute("data-reel");galleryReels.forEach(e=>{e.classList.remove("active"),e.id===`reel-${t}`&&e.classList.add("active")})})});